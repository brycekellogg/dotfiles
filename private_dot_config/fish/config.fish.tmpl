
# The default greeting when you start fish
# needs to be set to blank to disable.
set fish_greeting

if status is-interactive

    # In interactive mode, we set the
    # default shell to be fish. This allows
    # us to have tmux default to the shell
    # that launched it independent of the
    # true default shell.
    set -x SHELL (which fish)

    set -l DIRCOLORS_FILE "$HOME/.config/dircolors/solarized-dircolors.256dark"
    set -q XDG_CONFIG_HOME && set -l DIRCOLORS_FILE "$XDG_CONFIG_HOME/dircolors/solarized-dircolors.256dark"
    eval (dircolors -c $DIRCOLORS_FILE)

    # Aliases
    alias vim='nvim'
    alias ll='exa -l --group-directories-first'
    alias ls='exa --group-directories-first'
    alias la='exa -la --group-directories-first'
    alias fd='fdfind'  # might not work in fedora?

    set -gx EDITOR nvim
    set -gx VISUAL nvim

    set -x SSH_AUTH_SOCK /run/user/(id -u)/gnupg/S.gpg-agent.ssh


    fish_add_path --path $HOME/.local/bin

    # When using WSL, some binaries (notably win32yank) need
    # to be stored in a Windows path for speed issues. This
    # adds that directory to the path if it exists.
{{ if .osid | contains "wsl" }}
    set --local winuser (cmd.exe /c "echo %USERNAME%" 2>>/dev/null | tr -d '\r')
    set --local wslbin /mnt/c/Users/$winuser/wsl-bin/
    if test -d $wslbin
        fish_add_path --path $wslbin
    end
{{ end }}
end


# Config options for the tide prompt. These need to
# be set outside the `is-interactive` block because
# the async nature of the prompt means that they
# are evaluated outside of an interactive session.
set -g tide_left_prompt_items pwd git character
set -g tide_character_color green
set -g tide_character_color_failure red
set -g tide_git_color_branch yellow
set -g tide_pwd_color_dirs 859900
set -g tide_pwd_color_anchors 859900
set -g tide_pwd_color_truncated_dirs 859900
